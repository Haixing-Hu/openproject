//-- copyright
// OpenProject is a project management system.
// Copyright (C) 2012-2018 the OpenProject Foundation (OPF)
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License version 3.
//
// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:
// Copyright (C) 2006-2017 Jean-Philippe Lang
// Copyright (C) 2010-2013 the ChiliProject Team
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License
// as published by the Free Software Foundation; either version 2
// of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program; if not, write to the Free Software
// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
//
// See docs/COPYRIGHT.rdoc for more details.
//++


// IMPORTANT!

// This is a "junk-drawer" containing CSS rule sets that could not be easily
// placed elsewhere. Pleade DO NOT add to this file. Instead MOVE, refactor or
// REMOVE with ruthlessness.

$version-summary-width: 380px

.message.reply h4
  min-height: 42px
  line-height: 2

#roadmap
  @media only screen and (min-width: 680px)
    .generic-table--no-results-container
      max-width: calc(100% - #{$version-summary-width})

#version-summary
  float: right
  width: $version-summary-width
  margin-left: 16px
  margin-bottom: 16px
  background-color: #fff
  .total-hours
    text-align: right

#type_project_ids
  ul
    margin: 0
    padding-left: 1em
  li
    list-style-type: none

.total-hours
  font-weight: bold


p.other-formats
  font-size: 0.9em
  color: #666

.other-formats span + span:before
  content: "| "

/* Project members tab */

div#tab-content-members
  .user.status_registered, label.status_registered
    opacity: 0.8
  .member
    .icon-group:before
      padding-left: 0

input#user_search
  width: 100%

.quick_info
  padding-bottom: 0.5em
  &.attributes .label
    font-weight: bold

.journal-link
  float: right

h2 img
  vertical-align: middle

h1.title
  margin: 12px 24px 9px

form#issue-list
  position: relative

div.issue hr
  margin-top: 10px
  margin-bottom: 10px
  clear: both

#content div.issue h3, div.issue h3
  border: 0
  margin-top: -6px
  margin-bottom: 0


#project-links
  right: 30px
  color: #ccc
  font-weight: bold

li
  &.root
    margin-bottom: 24px

.profile-wrap
  float: right
  position: relative
  width: 42px
  height: 42px
  top: 7px
  right: 14px

td.issue div.issue-wrap-outer
  position: relative

.menu li
  position: relative
  &:first-child
    border-top: 0
  &:last-child
    border-bottom: 0

.inline
  display: inline

form#issue-list
  display: block

.js-tooltip
  width: 100%

.js-tooltip-inner
  width: 100%
  max-height: none

.js-tooltip .issue-tooltip-description
  max-height: 200px
  overflow: hidden

/* roadmap breathing */

#roadmap h3
  margin: 21px 0 12px

div.issue div#relations
  margin-top: 25px

/* all kinds of wonderful tweaks*/

.question pre
  color: #111

div.issue hr
  width: auto

.question .wiki
  margin: 0

// The min-height takes care that menus within the toolbar can be seen.
// On the full screen view the min-height crashes the complete view
// when anchors in the url were used on small sreens, because there the body is not scrollable.
body:not(.action-show) #content
  min-height: 300px

#content
  h3
    margin: 12px 0 6px
  h2 + h3
    margin-top: 12px

.nosidebar
  ol.ui-sortable li
    list-style: none outside none

tr.time-entry
  white-space: normal

/* scm */

#content table .changeset td.id a:hover
  text-decoration: underline


/* member settings [pc] */

select#member_role_id
  width: 75px

/* fix for thumbnail jankiness */

a.has-thumb
  &.active
    left: auto
    margin-left: -10px
    margin-right: 0
    *left: -10px
    /* IE6 & 7 hacks */
    *margin-left: 0
  img
    z-index: 1001

#more-menu.drop-down ul li a.projects
  border-top: 1px solid #555

.reorder-icons img
  padding-right: 3px
  padding-left: 3px


/* Cut of text with '...' - working on all major browsers and IE6+
 * not working for Firefox < 7 */

.ellipsis,
.form--field.ellipsis .form--label
  @include text-shortener

label
  margin-bottom: 0rem
  &.label-with-input
    display: block
    white-space: nowrap
    zoom: 1
    margin-left: 0
    float: none

#query_form_content
  padding-top: 10px

#watchers .contextual
  margin-top: 0

div
  &.issues.box > p, &.mypage-box p
    margin-top: 15px

  &.overview
    padding: 6px
    margin-bottom: 10px
    line-height: 1.5em

td.table-buttons
  vertical-align: middle

select#available_columns
  margin-right: 0

.pages-hierarchy
  padding-left: 10px
  list-style-type: disc
  list-style-position: inside

#menu-sidebar.hidden
  display: none

div#watchers
  margin-top: 25px
  > form > p
    margin-top: 5px

a > img.imgtag-icon
  float: left
  margin-right: 3px

th.checkbox img
  margin-left: 3px
  margin-top: 3px

p.buttons
  margin-left: 10px

strong.related-issues-heading
  display: block
  margin-top: 10px

div.indent
  padding-left: 10px

/* Menu item configuration */

.menu-item-form
  p
    padding-left: 0
  label
    display: inline-block
    margin-bottom: 10px
    margin-left: 0
    width: auto
    font-weight: bold
  select#parent_wiki_menu_item
    margin-left: 7px
    margin-top: -1px
    line-height: normal
  #item-name
    float: left
    padding-left: 3px
    margin-right: 4px
    line-height: 21px
  label#with-select
    margin-left: 0
  select#parent_wiki_menu_item_wiki_page
    margin-bottom: 10px
  p
    &.item-name
      padding-top: 10px
    &.main_item
      padding-bottom: 0
    &.wiki_menu_item_optional_links
      margin-left: 10px
      padding-top: 0

/*Cost-Plugin specific styles */

input::-webkit-input-placeholder, :-moz-placeholder
  color: #000000

#ui-dialog-closer
  cursor: pointer
  position: absolute
  right: 0px
  top: 5px
  z-index: 5000

  &.icon:before
    color: $body-font-color

#modalDiv
  padding: 2em 0 0 1.5em

  &.-full
    padding: 0

h4.comment
  margin-bottom: 8px
  margin-top: 18px
  img
    margin-right: 3px

/*
 * Legacy headings to create headings which are similiar to the toolbar
 * but cannot use the toolbar yet (e.g Legacy forms)
 */
.legacy-heading
  // this will harmonize the headings in the old legacy form
  // to be the same as if using a toolbar component
  // TODO: once WP full screen create hits, remove this
  padding-top: 12px
  border: 0
  @include breakpoint(medium down)
    font-size: $h2-font-size

#members_add_form
  display: none
  margin-bottom: 1rem
  .-flex
    display: flex
    align-items: flex-end

    // Neccassary to avoid the appearance of a scroll bar
    .select2-search-field
      margin: 0

    .form--field,
    #member-add-submit-button--container
      margin-bottom: 1px
      flex-basis: 50%

    &:not(.-with-button)
      .form--field
        overflow: hidden

  // Override default margin to allow correct vertical alignment
  #add-member--submit-button
    margin-bottom: 0
    margin-left: 1rem
    // Neccessary so that button and select box have the same height
    line-height: 0.6rem

@include breakpoint(680px down)
  #members_add_form .-flex
    align-items: flex-start

    &.-with-button
      flex-direction: column
      // Workaround for safari and IE
      // They are not able to get the correct height with flex-direction: column
      height: 120px

    #add-member--submit-button
      margin-left: 0
    .form--field
      margin-bottom: 1rem

@media screen and (max-width: 87rem) and (min-width: 681px)
  #members_add_form .-flex.-with-button
    .form--field
      max-width: 60%
      select
        max-width: 60%

// Avoid content cut off in IE
#new-member-message + div.grid-block
  min-height: 6rem
  div.grid-block
    overflow: visible
